### 一. Algorithm

本周看了极客时间专栏《数据结构与算法之美》二分查找的部分，找了一道二分查找相关的作为练习题: [744. Find Smallest Letter Greater Than Target](https://leetcode.com/problems/find-smallest-letter-greater-than-target/), 查找大于给定值的最小元素，重点是搞清楚 mid 值与给定值的判断与上下界的变化。

- a[mid] <= target: 说明大于target 值的元素在 mid+1 ~ high 之间。
- a[mid] > target: 如果 a[mid==0] 或者 a[mid-1] 的值小于 target，说明不存在比 target 更大且比 a[mid] 更小的值了；否则目标值在 low ~ (mid-1) 之间。

具体代码如下:

```
class Solution {
    public char nextGreatestLetter(char[] letters, char target) {

        int len = letters.length;

        if (target > letters[len-1]) {
            return letters[0];
        }

        int low = 0;
        int high = len - 1;
       
        while (low <= high) {
             int mid = low + ((high - low) >> 1);
            if (letters[mid] <= target) {
                if (mid + 1 == len) {
                    return letters[0];
                }
                low = mid + 1;
            }else {
                if (mid == 0 || letters[mid-1] <= target) {
                    return letters[mid];
                }else {
                    high = mid-1;
                }
            }
        }
        return letters[0];
    }
}
```

典型的二分查找题目，时间复杂度为 O(logN), 执行效率 7 ms, faster than 98.38% 。


### 二. Review

本次读了 Medium 上一篇关于 Go 的文章 [https://medium.com/@eminetto/clean-architecture-using-golang-b63587aa5e3f](https://medium.com/@eminetto/clean-architecture-using-golang-b63587aa5e3f)。

作者基于 Bob 大叔的《架构整洁之道》 中提到的关于架构的描述，用 Go 语言实现了一个示例。

主要的关注点还是在架构原则上，作者分享了书中提到的有关整洁架构的设计规范；

- 独立的框架。软件开发框架不受某些特征库的约束。
- 可测试的业务逻辑。业务单元要充分解耦，其测试时可以摆脱 UI 和数据库的依赖
- UI 与业务逻辑解耦，
- 独立的数据存储单元。数据存储与业务单元应该是解耦的，业务单元不关心数据层是如何存储的
- 业务单元要与外界隔离，类似函数式编程，只关心输入和计算结果

基于这些约束，作者提高可以将 Go 项目分为如下四层；

- Entities 层: 一系列数据结构和方法的结合，用来封装业务
- User Case 层: 针对业务逻辑的封装
- Controller 层: 该层负责数据层与 Entities 层的数据转换
- 框架 & 驱动层: 该层是一些封装好的框架工具、数据存储组件等

具体代码这里不做展示了，可以看出其总体设计规则不会随着语言的变化而变化，通过 controller 将业务层和数据存储层作解耦，业务层只关心业务逻辑。这样就算数据存储介质变了，比如从 Oracle 转为 MySQL 存储，也不会对业务层有任何影响。万能的中间层。。。


### 三. Tip

本周分享一个 Python Debug 调试 Django command 脚本的小技巧。在开发 Django 应用时，有时针对某个操作可以使用 command 单独运行，这样比起运行项目通过接口进行 debug 调试要灵活许多。

首先单独新建一个运行配置，如下:

![](https://github.com/zouyingjie/arts/blob/master/image/django_debug_cmd_tip01.png)


点击 “添加” 新建一个 Python 配置，指明 ***manager.py*** 的路径和要 debug 的 command 命令，如下:
![](https://github.com/zouyingjie/arts/blob/master/image/django_debug_cmd_tip2.png)

完成后就可以在对应的 command 中打断点了, 如下:

![](https://github.com/zouyingjie/arts/blob/master/image/django_debug_cmd_tip03.png)

然后点击 debug 按钮运行即可进行断点调试，如下:

![](https://github.com/zouyingjie/arts/blob/master/image/django_debug_cmd_tip04.png)

以上就是完整的调试流程了，希望对需要的同学有所帮助。
### 四. Share