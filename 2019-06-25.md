### 一. Algorithm

### 二. Review

读微软云设计模式系列之:[Ambassador pattern（外交官模式）](https://docs.microsoft.com/en-us/azure/architecture/patterns/ambassador)

#### 1. 问题来源

基于云的应用的弹力设计需要有熔断、路由、计量、监控以及对于网络相关配置的升级等功能。这些功能在遗留系统或者某些库中可能较难实现，因为这些代码可能已经不再维护或者修改成本很大。另外对于网络调用可能也需要连接、校验、授权等相关的配置，如果有多个不同语言或者框架实现的应用需要互相访问，那么我们需要针对每一个应用做单独的配置，这样会带来极大的运维成本。

#### 2. 解决方案

通过创建一个外部进程来充当应用和外部服务之间的代理，将该进程与我们的应用部署在同一个主机上，并提供路由。弹性设计、安全等功能，并且避免任何与主机相关的访问限制。另外该进程还可以监控请求延迟、资源占用相关的指标，因为进程与应用是在同一主机上，因此可以直观的展示应用的资源占用情况。设计如图：

![](https://docs.microsoft.com/en-us/azure/architecture/patterns/_images/ambassador.png)



### 三. Tips

### 四. Share