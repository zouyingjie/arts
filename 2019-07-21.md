### 一. Algorithm

做了 [198. House Robber](https://leetcode.com/problems/house-robber/)，将做题总结单独写了篇博客 [LeetCode-198. House Robber-简记](https://www.zouyingjie.com/post/-leetcode198.-house-robber%E7%AE%80%E8%AE%B0/)，从这道题目开始集中学习总结下动态规划相关题目的解法，争取把爬楼梯、买卖股票等题目全部总结一遍。

### 二. Review

读微软云设计模式最佳实践系列之[API design](https://docs.microsoft.com/en-us/azure/architecture/best-practices/api-design)。文章主要讲解了 API 设计相关的内容，

对于 API 的设计，最重要的是两点：

- 平台独立：客户端调用 API 时不应该关心服务的内部实现。这要求我们的 API 应该有标准的请求协议和规范的数据交换格式。
- 服务可演化并且向前兼容：API 对应的服务是可以迭代改进的，可以不断添加新的功能，同时我们需要保证客户端在不做任何修改的情况下依然可以正常工作。

#### 1. REST 简介

REST（表现层状态传递）是一种客户端与服务端交互的架构原则。其资源为核心，客户端通过与服务端交互来影响资源表现形式（表现层状态）的变化。关于 REST 架构的接收可以参考阮一峰老师的这篇文章 [理解RESTful架构](http://www.ruanyifeng.com/blog/2011/09/restful.html) 和 [维基百科](https://en.wikipedia.org/wiki/Representational_state_transfer)。

简单来说基于 HTTP 的 REST API 设计有如下特点：

- REST 风格的API 是基于***资源***定义的，这里的资源可以是任何可以被访问的服务、对象或者数据。
- 每种资源都需要有一个唯一的标识符以便在 URI 中来标识。例如下面是某个消费者订单的 URI:

```
https://adventure-works.com/orders/1

```

- 客户端与服务端通过交换数据进行交互，web 应用通常以 JSON 格式来传递数据。下面是通过 GET 请求获取订单数据的示例：

```
{"orderId":1,"orderValue":99.90,"productId":1,"quantity":1}
```

- REST API 使用统一的交互格式以便解耦客户端与服务端。例如对于基于 HTTP 请求的 REST API，其对资源的操作动作是通过 HTTP 的请求方法确定的，最常用的有 GET、POST、PUT、DELETE、PATCH 等。
- REST API 的请求是无状态的，每个请求都应该是一个原子操作。这样可以方便 API 的扩展。
- REST API 可以基于链接来确定可以访问哪些 API，比如下面的例子，获取的订单数据包含了 PUT 和 GET 的链接，标识可以进行查询和更新操作。
```
{
    "orderID":3,
    "productID":2,
    "quantity":4,
    "orderValue":16.60,
    "links": [
        {"rel":"product","href":"https://adventure-works.com/customers/3", "action":"GET" },
        {"rel":"product","href":"https://adventure-works.com/customers/3", "action":"PUT" }
    ]
}
```

关于 WEB API，Leonard Richardson 提出了如下 [成熟度等级模型](https://martinfowler.com/articles/richardsonMaturityModel.html)：

- LEVEL0：定义一个 URL，所有操作都通过向该 URL 发送 POST 请求完成。
- LEVEL1：为每种资源单独定义 URL，所有操作通过 POST 请求完成。
- LEVEL2：为每种资源单独定义 URL，基于 HTTP 请求方法类定义对资源的操作。
- LEVEL3：使用超媒体（下文中会有具体解释）。

以上四种形式，LEVEL3 是最符合 REST 定义的，不过实际操作中大多使用 LEVEL2 风格。

#### 2. 围绕资源组织 API

#### 3. 基于 HTTP 的请求方法定义操作

### 三. Tips

分享下在极客时间《Web 协议详解与抓包实战》课程中学到的通过 Wireshark 抓取 TSL/SSL 包的方法，下面是我在 Mac 上的操作：

#### 1. 配置 SSLKEYLOGFILE 环境变量 & Chrome 打印 SSK KEY

TLS/SSL 将我们的数据包进行加密后传输，为了能够解密自然要将相关的密钥记录下来。操作步骤如下：

- 创建日志文件

```
touch ~/Desktop/keys.log
```

- 配置 SSLKEYLOGFILE 环境遍历

```
 export SSLKEYLOGFILE=$HOME/Desktop/keys.log
```

- 重启 Chrome 浏览器

可以在关闭 Chrome 后通过下面的命令重启 Chrome 浏览器，指明记录 ssl-key 的日志路径。
```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --ssl-key-log-file=$HOME/Desktop/keys.log
```

现在我们在访问启用了 https 的网站时就可以记录下 key 啦，如图：

![](https://zouyingjie-blog.oss-cn-beijing.aliyuncs.com/arts_51_tips01.png)


#### 2. 配置 Wireshark

将网站的 key 记录下来之后就要告诉 Wireshark 从哪里找到这些 key 以便在抓包时解析了。在 ``Wireshark -> 首选项 -> Protocols -> TLS`` 下进行设置，将我们上面创建的 keys.log 文件路径填进去即可。如图：

![](https://zouyingjie-blog.oss-cn-beijing.aliyuncs.com/arts_51_tips02.png)。

#### 3. 抓包实践

完成配置后就可以进行抓包了，随便找一个支持 HTTPS 的网站，比如  ``https://www.sina.com.cn``，在捕获选项中添加过滤项，然后就可以看到原本通过 TLS/SSL 传输的数据被解析为 HTTP2 了。

![](https://zouyingjie-blog.oss-cn-beijing.aliyuncs.com/arts_51_tips_04.png)

![](https://zouyingjie-blog.oss-cn-beijing.aliyuncs.com/arts_51_tips03.png)



上面就是简单的操作过程，需要注意的一点注是是务必通过配置 ``--ssl-key-log-file`` 启动的 Chrome 来访问网站，否则 Chrome 不会打印日志到 keys.log，我们的 Wireshark 自然就无法解密。

### 四. Share


